var grid,informe_cotizaciones__pie,informe_cotizaciones__pie_config;function format(t){t.element;return console.log(t),html="<div> <strong>"+t.text+"</strong></div>",""}jQuery.validator.addMethod("cantidadminima",function(t,e){return cantidad_1=jQuery(e).closest("tr").attr("data-cantidad-1"),cantidad_1=parseInt(cantidad_1),this.optional(e)||t>=cantidad_1},"* ");var main={verifica:function(){return t=jQuery("#form-ingreso").valid(),!!t&&confirm("Esta seguro de realizar el registro?")},init:function(){$("#datetimepicker3").datetimepicker({format:"YYYY-MM-DD"}),$("#datetimepicker4").datetimepicker({format:"YYYY-MM-DD"}),jQuery("body").on("change","#maniobras",function(t){t.preventDefault(),jQuery(this).is(":checked")?jQuery("#maniobras_importe").removeAttr("disabled"):jQuery("#maniobras_importe").attr("disabled","disabled")}),jQuery("body").on("change","#vehiculos_id",function(t){t.preventDefault(),id=jQuery(this).val(),$.ajax({url:_site_url+"/config/vehiculo_image/",type:"post",dataType:"html",data:{id:id}}).done(function(t){jQuery(".vehiculo-image").html(t)}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}),$(".numeric").numeric(),jQuery("body").on("click",".js-ingreso",function(t){jQuery(".page-1").hide(),jQuery(".page-2").show(),jQuery(".page-3").hide(),t.preventDefault()}),jQuery("body").on("click",".js-cancelar",function(t){jQuery(".page-1").show(),jQuery(".page-2").hide(),jQuery(".page-3").hide(),t.preventDefault()}),$(document).ready(function(){$("#js-validation--custom-1").validate({rules:{"sedes[]":{required:!0}},messages:{"sedes[]":{required:""}}})}),$.each($("form.js-validation"),function(t,e){console.log(" append.. data validate loaded "),jQuery(this).attr("data-validate-loaded",1),$(this).validate()}),this.init_table_cotizacion(),this.init_cotizacion_form(),this.init_button_delete(),this.init_button_submit()},init_button_submit:function(){jQuery("body").on("click",".js-submit",function(t){id=jQuery(this).attr("data-target"),jQuery(this).closest(".modal").find(id).trigger("click"),t.preventDefault()})},init_button_delete:function(){jQuery("body").on("click",".btn-tr-delete",function(t){jQuery(this).closest("tr").fadeOut("fast",function(){jQuery(this).remove()})})},init_table_instancias_tutor:function(){},init_cotizacion_form:function(){this.init_cotizacion_form_empresas(),this.init_cotizacion_form_clientes(),this.init_cotizacion_form__productos(),this.init_change_cantidad(),this.init_input_cantidad(),this.init_form_impuesto(),this.custom__init_numbers(),this.init_table_proyectos()},custom__init_numbers:function(){$(".money.not-load").removeClass("not-load").addClass("loaded").number(!0,4)},custom__update_form_cotizacion:function(t,e,a){0<a.cotizacion_id?(location.href=_site_url+"/cotizacion/operacion/"+a.cotizacion_id,jQuery("#cotizacion_id").val(a.cotizacion_id),jQuery("#title-update").html("Actualizar CotizaciÃ³n #"+a.cotizacion_id).show(),jQuery("#title-update").removeClass("hidden"),jQuery("#title-create").addClass("hidden"),jQuery(".btn-cotizacion-preview").removeAttr("disabled").removeProp("disabled"),jQuery(".btn-cotizacion-send").removeAttr("disabled").removeProp("disabled")):(jQuery("#title-create").removeClass("hidden"),jQuery("#title-update").addClass("hidden"))},init_table__informe_cotizaciones:function(){},init_cotizacion_form_empresas:function(){jQuery("body").on("change","#empresas_id",function(t){t.preventDefault(),empresas_id=jQuery(this).val(),$.ajax({url:_site_url+"/cotizacion/get_clientes",type:"POST",dataType:"json",data:{empresas_id:empresas_id}}).done(function(t){console.log("success"),jQuery("#clientes_id").html(t.html),0<clientes_id&&(jQuery("#clientes_id").val(clientes_id),jQuery("#clientes_id").trigger("change"))}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}),"undefined"!=typeof cotizacion_id&&0<cotizacion_id&&jQuery("#empresas_id").trigger("change"),jQuery("#emails").tagThis({email:!0,noDuplicates:!0,callbacks:{afterAddTag:function(){tags=jQuery("#emails").data("tags"),_temp="",$.each(tags,function(t,e){console.log(this.text),_temp=_temp+","+this.text}),jQuery("#lista-emails").val(_temp)},afterRemoveTag:function(){tags=jQuery("#emails").data("tags"),_temp="",$.each(tags,function(t,e){console.log(this.text),_temp=_temp+","+this.text}),jQuery("#lista-emails").val(_temp)}}})},init_cotizacion_form_clientes:function(){jQuery("body").on("change","#clientes_id",function(t){t.preventDefault(),clientes_id=jQuery(this).val(),$.ajax({url:_site_url+"/cotizacion/get_cliente",type:"POST",dataType:"json",data:{clientes_id:clientes_id}}).done(function(t){console.log("success"),jQuery("#js-info-cliente").html(t.html)}).fail(function(){console.log("error")}).always(function(){console.log("complete")})})},init_cotizacion_form__productos:function(){$.fn.select2.amd.require(["select2/data/array","select2/utils"],function(t,e){function a(t,e){a.__super__.constructor.call(this,t,e)}e.Extend(a,t),a.prototype.current=function(t){var e=[],a=this.$element.val();this.$element.prop("multiple")||(a=[a]);for(var o=0;o<a.length;o++)e.push({id:a[o],text:a[o]});t(e)}}),jQuery(".js-select2-form").not(".load").each(function(e,a){console.log(e+" = add... new select2"),_this=this,init=jQuery(_this).attr("data-init"),console.log(init),"undefined"==typeof init?t={id:-100,codigo:"",text:"Seleccione"}:t=JSON.parse(init),jQuery(this).addClass("load").select2({data:function(t){return t.length<=0?{results:null}:{results:$.map(t,function(t){return t})}}([t]).results,width:"100%",templateResult:function(t){return console.log(t),t.id?(data=t,this.description="<div class='card-producto'><div class='title'> ["+data.codigo+"] "+data.text+"</div><div><img src='/productos/"+data.imagen+"'><div class='description'  > "+data.descripcion+" </div></div></div>",this.description):t.text},templateSelection:function(t){return data=t,jQuery(t.element).closest("tr").attr("data-precio-1",data.precio_1),jQuery(t.element).closest("tr").attr("data-precio-2",data.precio_2),jQuery(t.element).closest("tr").attr("data-precio-3",data.precio_3),jQuery(t.element).closest("tr").attr("data-precio-4",data.precio_4),jQuery(t.element).closest("tr").attr("data-precio-5",data.precio_5),jQuery(t.element).closest("tr").attr("data-cantidad-1",data.cantidad_1),jQuery(t.element).closest("tr").attr("data-cantidad-2",data.cantidad_2),jQuery(t.element).closest("tr").attr("data-cantidad-3",data.cantidad_3),jQuery(t.element).closest("tr").attr("data-cantidad-4",data.cantidad_4),jQuery(t.element).closest("tr").attr("data-cantidad-5",data.cantidad_5),jQuery(t.element).closest("tr").find(".fila-cantidad").attr("title","Minimo aceptado "+data.cantidad_1),jQuery(t.element).closest("tr").find(".fila-cantidad").attr("data-original-title","Minimo aceptado "+data.cantidad_1),jQuery(t.element).closest("tr").find(".fila-cantidad").tooltip(),setTimeout(function(){_helper_trigger("custom__update_row",t.element)},500),void 0===data.imagen?img="":img="<img src='/productos/"+data.imagen+"'>","<div class='card-producto-selected'><div>"+img+"<div class='title'> ["+data.codigo+"] "+data.text+"</div></div></div>"},escapeMarkup:function(t){return t},dropdownCssClass:"bigdrop",ajax:{dataType:"json",url:_site_url+"/productos/get_ajax",quietMillis:250,current:function(){console.log(55555)}}})})},table__informe_cotizaciones_data:function(){tr=jQuery("#table tbody tr:visible");var a=0,o=0,i=0;return jQuery.each(tr,function(t,e){a+=parseInt(jQuery(this).find("td").eq(1).text()),o+=parseInt(jQuery(this).find("td").eq(2).text()),i+=parseInt(jQuery(this).find("td").eq(3).text()),console.log([a,o,i])}),[a,o,i]},table__informe_cotizaciones_update:function(){informe_cotizaciones__pie_config.data.datasets.forEach(function(t){t.data=main.table__informe_cotizaciones_data()}),informe_cotizaciones__pie.update()},table__informe_cotizaciones:function(){informe_cotizaciones__pie_config={type:"doughnut",data:{labels:["Pendiente","Aprobados","Rechazado"],datasets:[{label:"Cotizaciones",data:main.table__informe_cotizaciones_data(),backgroundColor:["orange","green","red"]}]},options:{cutoutPercentage:0,legend:{display:!0},tooltips:{callbacks:{label:function(t,e){var a=e.datasets[t.datasetIndex],o=a.data.reduce(function(t,e,a,o){return t+e}),i=a.data[t.index],n=Math.floor(i/o*100+.5);return str="("+i+"  cotizaciones)",1==i&&(str="("+i+" cotizacion )"),n+"% "+str}}},plugins:{labels:{render:"percentage",fontColor:["white","white","white"],precision:2}}}},window.onload=function(){ctx=jQuery("#myChart"),informe_cotizaciones__pie=new Chart(ctx,informe_cotizaciones__pie_config)}},update_row_cotizacion:function(t){console.log("update row producto....");var a=0;_tipo_cambio=jQuery("#tipo_cambio").val(),""==_tipo_cambio&&(_tipo_cambio=1),jQuery("table#tabla_productos tr").each(function(t,e){cantidad=jQuery(this).find(".fila-cantidad").val(),descuento=jQuery(this).find(".control-descuento").val(),""!=cantidad&&0<cantidad&&(data=jQuery(this).find("select.fila-producto-id").select2("data")[0],console.log("ITERANDO...."),precio=0,cantidad=parseInt(cantidad),descuento=parseFloat(descuento),"undefined"!=typeof data&&(data.cantidad_1<=cantidad&&cantidad<data.cantidad_2&&(precio=data.precio_1),data.cantidad_2<=cantidad&&cantidad<data.cantidad_3&&(precio=data.precio_2),data.cantidad_3<=cantidad&&cantidad<data.cantidad_4&&(precio=data.precio_3),data.cantidad_4<=cantidad&&cantidad<data.cantidad_5&&(precio=data.precio_4),data.cantidad_5<=cantidad&&(precio=data.precio_5),jQuery(this).find(".fila-cantidad").attr("title","Minimo aceptado "+data.cantidad_1),jQuery(this).find(".fila-cantidad").attr("data-original-title","Minimo aceptado "+data.cantidad_1),data.cantidad_1,cantidad),0<descuento?nuevo_precio=parseFloat(descuento).toFixed(_decimals)*parseFloat(cantidad).toFixed(_decimals):nuevo_precio=parseFloat(precio).toFixed(_decimals)*parseFloat(cantidad).toFixed(_decimals),jQuery(this).find(".fila-precio").html(_format_number(precio,"USD")),a=parseFloat(a),a=nuevo_precio+a,jQuery(this).find(".fila_total").html(_format_number(nuevo_precio.toFixed(_decimals),"USD")))}),impuesto=jQuery("#impuesto").val(),""==impuesto||0==impuesto?impuesto=0:(impuesto=impuesto.trim(),impuesto=parseFloat(impuesto)),impuesto_original=impuesto,impuesto_total=a*impuesto_original/100,impuesto+=100,total=a*impuesto/100,jQuery("#subtotal").html(_format_number(a.toFixed(_decimals),"USD")),jQuery("#impuesto_total").html(_format_number(impuesto_total.toFixed(_decimals),"USD")),jQuery("#total").html(_format_number(total.toFixed(_decimals),"USD")),1!=_tipo_cambio?(subtotal_2=a*_tipo_cambio,impuesto_total_2=impuesto_total*_tipo_cambio,total_2=total*_tipo_cambio,_moneda_id=jQuery("#moneda_id").val(),jQuery("#subtotal_2").html(_format_number(subtotal_2.toFixed(_decimals),_moneda_id)),jQuery("#impuesto_total_2").html(_format_number(impuesto_total_2.toFixed(_decimals),_moneda_id)),jQuery("#total_2").html(_format_number(total_2.toFixed(_decimals),_moneda_id))):(jQuery("#subtotal_2").html(""),jQuery("#impuesto_total_2").html(""),jQuery("#total_2").html(""))},init_change_moneda_id:function(){jQuery("body").on("change","#moneda_id",function(t){_val=jQuery(this).val(),_tipo_cambio=devises["USD"+_val],jQuery("#tipo_cambio").val(_tipo_cambio),_helper_trigger("custom__update_row",this),t.preventDefault()})},init_change_cantidad:function(){_self_=this,jQuery("body").on("keypress input keyup ",".fila-cantidad",function(t){_this=jQuery(this),_helper_trigger("custom__update_row",_this)}),jQuery("body").on("keypress input keyup ",".control-descuento",function(t){_this=jQuery(this),_helper_trigger("custom__update_row",_this)}),jQuery("body").on("keypress input keyup ","#tipo_cambio",function(t){_this=jQuery(this),_helper_trigger("custom__update_row",_this)}),jQuery("body").on("click",".btn-clear-precio-descuento",function(t){jQuery(this).closest("div").find("input").val(0),_this=jQuery(this),_helper_trigger("custom__update_row",_this)}),$(".fila-cantidad").each(function(t,e){$(this).tooltip({})})},init_input_cantidad:function(){jQuery("body").on("keypress input keyup","input.fila-cantidad",function(t){var e=t||window.event;if("paste"===e.type)a=event.clipboardData.getData("text/plain");else{var a=e.keyCode||e.which;a=String.fromCharCode(a)}/[0-9]/.test(a)||(e.returnValue=!1,e.preventDefault&&e.preventDefault())})},init_form_impuesto:function(){jQuery("body").on("change","#impuesto",function(t){_this=jQuery(this),_helper_trigger("custom__update_row",_this)})},init_table_cotizacion:function(){$("#grid-data").bootgrid({ajax:!0,post:function(){return{id:"b0df282a-0d67-40e5-8558-c9e93b7befed"}},url:_site_url+"/cotizacion/ajax_list",formatters:{link:function(t,e){return'<a href="'+_site_url+"/cotizacion/operacion/"+e.cotizacion_id+"\" class='btn btn-primary btn-xs js-detalles'> Detalles </a>"},status:function(t,e){switch(e.status_row){case"0":text="Pendiente",label="warning";break;case"1":text="APROBADO",label="success";break;case"-1":text="Observado",label="danger";break;case"2":text="DENEGADO",label="danger";break;case"3":text="Aprobado",label="success";break;default:text="-",label="warning"}return'<label class="label label-'+label+'">  '+text+"</label>"}}})},init_finalizar_proyecto:function(){jQuery("body").on("click",".js-finalizar-proyecto",function(t){$.confirm({title:"Confirmar",content:"si usted finaliza este proyecto, solo podra ser re-abierto por un administrador. Â¿Desea finalizar el proyecto?",buttons:{Ok:{text:"Ok",btnClass:"btn-blue",keys:["enter","shift"],action:function(){$.ajax({url:_site_url+"/proyectos/finalizar_proyecto/",type:"POST",dataType:"json",data:{proyectos_id:jQuery("#global_proyectos_id").val()}}).done(function(t){1==t.error?alert(t.message):(alert(t.message),location.reload())}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}},cancel:function(){}}})}),jQuery("body").on("click",".js-reabrir-proyecto",function(t){$.confirm({title:"Confirmar",content:"  Â¿Desea Re-abrir el proyecto?",buttons:{Ok:{text:"Ok",btnClass:"btn-blue",keys:["enter","shift"],action:function(){$.ajax({url:_site_url+"/proyectos/finalizar_proyecto/1",type:"POST",dataType:"json",data:{proyectos_id:jQuery("#global_proyectos_id").val()}}).done(function(t){1==t.error?alert(t.message):(alert(t.message),location.reload())}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}},cancel:function(){}}})})},init_table_proyectos:function(){$("#grid-data-proyectos").bootgrid({ajax:!0,post:function(){return{id:"b0df282a-0d67-40e5-8558-c9e93b7befed"}},url:_site_url+"/proyectos/ajax_list",formatters:{link:function(t,e){return'<a href="'+_site_url+"/proyectos/detalles/"+e.proyectos_id+"\" class='btn btn-primary btn-xs js-detalles'> Detalles </a>"},status:function(t,e){switch(e.status_row){case"0":text="INICIADO",label="warning";break;case"1":text="Entregado y cobrado",label="default";break;case"2":text="En produccion",label="success";break;case"3":text="Entregado por cobrar",label="warning";break;case"4":text="Con inconvenientes",label="danger";break;default:text="-",label="warning"}return'<label class="label label-'+label+'">  '+text+"</label>"}}})},init_js_atender:function(){console.log("init_js_atender....")},init_js_flag:function(){grid=jQuery("body").on("change",".js_flag",function(t){id=jQuery(this).attr("name"),"status"==id&&jQuery(this).is(":checked")&&(jQuery(this).closest("form").find(".flag_datos").prop("checked",!1),jQuery(this).closest("form").find(".flag_foto").prop("checked",!1),jQuery(this).closest("form").find(".flag_partida").prop("checked",!1)),"flag_datos"!=id&&"flag_foto"!=id&&"flag_partida"!=id||jQuery(this).is(":checked")&&jQuery(this).closest("form").find(".status").prop("checked",!1),jQuery(this).closest("form").find("button#submit").trigger("click")})},init_table_proyectos_gestor:function(){grid=$("#grid-data").bootgrid({ajax:!0,post:function(){return name=jQuery("#_token").attr("name"),value=jQuery("#_token").val(),_extra_post={},_extra_post[name]=value,_extra_post},url:_site_url+"/proyectos/ajax_list",formatters:{tutor_datos:function(t,e){return e.tutor_nombres+" "+e.tutor_apellidos},usuario_datos:function(t,e){return null==e.usuario_nombres?'<label class="label label-success">Libre  </label>':'<label class="label label-warning">'+e.usuario_nombres+" "+e.usuario_apellidos+"  </label>"},link:function(t,e){return'<a href="'+_site_url+"/proyectos/detalles/"+e.id+"\" class='btn btn-primary btn-xs js-detalles'> Detalles </a>"},status:function(t,e){switch(e.status){case"0":text="Pendiente",label="warning";break;case"1":text="En progreso",label="warning";break;case"-1":text="Observado",label="danger";break;case"2":text="Corregido",label="warning";break;case"3":text="Aprobado",label="success";break;default:text="-",label="warning"}return'<label class="label label-'+label+'">  '+text+"</label>"}}}).on("loaded.rs.jquery.bootgrid",function(){grid.find(".js-detalles").on("click",function(t){}).end().find(".command-delete").on("click",function(t){alert("You pressed delete on row: "+$(this).data("row-id"))})})},init_time:function(){jQuery(".next_time").each(function(t,e){$(this).datetimepicker({format:"Y-M-D HH:mm:ss "})}),jQuery(".custom-date").each(function(t,e){supdiv=jQuery(this).closest("div"),div=jQuery(this).closest(".div-custom-date"),div.length<=0&&(div=jQuery("<div class='div-custom-date'> <i class='fa fa-calendar'></i></div>"),jQuery(this).appendTo(div),jQuery(div).appendTo(supdiv)),$(this).datetimepicker({format:"Y-M-D"})})},init_table_links_gestor:function(){grid=$("#grid-data").bootgrid({ajax:!0,post:function(){return name=jQuery("#_token").attr("name"),value=jQuery("#_token").val(),_extra_post={},_extra_post[name]=value,_extra_post},url:function(){return proyectos_id=jQuery("#grid-data").attr("data-proyectos_id"),_site_url+"/proyectos/ajax_list_links/"+proyectos_id},formatters:{tutor_datos:function(t,e){return e.tutor_nombres+" "+e.tutor_apellidos},link:function(t,e){return links="",links+=' <a href="'+_site_url+"/links/ajax_delete/"+e.id+"\" class='btn btn-primary btn-xs js-delete'> <span class='glyphicon glyphicon-trash'></span>  </a>",links},status:function(t,e){switch(e.status){case"0":text="Pendiente",label="warning";break;case"1":text="En progreso",label="warning";break;case"-1":text="Observado",label="danger";break;case"2":text="Corregido",label="warning";break;case"3":text="Aprobado",label="success";break;default:text="-",label="warning"}return'<label class="label label-'+label+'">  '+text+"</label>"}}}).on("loaded.rs.jquery.bootgrid",function(){grid.find(".js-forzar").on("click",function(t){href=jQuery(this).attr("href"),name=jQuery("#_token").attr("name"),value=jQuery("#_token").val(),_extra_post={},_extra_post[name]=value,_extra_post,_loading_show(),jQuery.ajax({url:href,type:"POST",dataType:"json",data:_extra_post}).done(function(t){console.log("success"),$("#grid-data").bootgrid("reload")}).fail(function(){console.log("error")}).always(function(){_loading_hide(),console.log("complete")}),t.preventDefault()}).end().find(".js-delete").on("click",function(t){_this=jQuery(this),$.confirm({title:"Confirmar",content:"Â¿Dese quitar el producto de este proyecto?",buttons:{Ok:{text:"Ok",btnClass:"btn-blue",keys:["enter","shift"],action:function(){href=jQuery(_this).attr("href"),name=jQuery("#_token").attr("name"),value=jQuery("#_token").val(),_extra_post={},_extra_post[name]=value,_extra_post,_loading_show(),jQuery.ajax({url:href,type:"POST",dataType:"json",data:_extra_post}).done(function(t){$("#grid-data").bootgrid("reload")}).fail(function(){console.log("error")}).always(function(){_loading_hide(),console.log("complete")})}},cancel:function(){}}}),t.preventDefault()})})},init_table_links_bases:function(){},init_select2_form_agregar_link:function(){jQuery(".ajax_select2_sites").each(function(t,e){jQuery(this).select2({ajax:{dataType:"json",url:function(t){return url=jQuery(this).attr("data-url"),url}}})})},init_modal_agregar_link:function(){jQuery("body").on("shown.bs.modal","#link-agregar",function(t){var e=$(t.relatedTarget);modal_body=jQuery("#link-agregar .modal-body"),_url=jQuery(e).attr("data-href"),jQuery.ajax({url:_url,type:"GET",dataType:"html",data:{param1:"value1"}}).done(function(t){jQuery(modal_body).html(t),main.init_select2_form_agregar_link(),_init_form()}).fail(function(){console.log("error")}).always(function(){console.log("complete")})})},init__reload_cotizaciones:function(){$.ajax({url:_site_url+"/proyectos/get_cotizaciones",type:"POST",dataType:"json",data:{proyectos_id:jQuery("#global_proyectos_id").val()}}).done(function(t){jQuery("#js-panel-cotizaciones").html(t.html)}).fail(function(){console.log("error")}).always(function(){console.log("complete")})},init__reload_costos:function(){$.ajax({url:_site_url+"/proyectos/get_costos",type:"POST",dataType:"json",data:{proyectos_id:jQuery("#global_proyectos_id").val()}}).done(function(t){jQuery("#js-panel-costos").html(t.html)}).fail(function(){console.log("error")}).always(function(){console.log("complete")})},init_detalles__view_cotizacion:function(){jQuery("body").on("click",".js-view-cotizacion",function(t){id=jQuery(this).attr("data-id"),$.ajax({url:_site_url+"/proyectos/view_cotizacion",type:"post",dataType:"json",data:{cotizacion_id:id}}).done(function(t){jQuery("#modal-js-view-cotizacion").find(".modal-body").html(t.html),jQuery("#modal-js-view-cotizacion").modal()}).fail(function(){console.log("error")}).always(function(){console.log("complete")})})},init_detalles__form_add_cotizacion:function(){jQuery("body").on("click","#js-add-cotizacion",function(t){$.ajax({url:_site_url+"/proyectos/form_add_cotizacion",type:"post",dataType:"json",data:{proyectos_id:jQuery("#global_proyectos_id").val()}}).done(function(t){jQuery("#modal-js-add-cotizacion").find(".modal-body").html(t.html),$(".switch-button").bootstrapToggle(),_this_.custom__init_numbers(),_this_.init_time(),_init_form(),jQuery("#modal-js-add-cotizacion").modal()}).fail(function(){console.log("error")}).always(function(){console.log("complete")})})},init_detalles__delete_costos:function(){jQuery("body").on("click",".js-delete-costo",function(t){costos_id=jQuery(this).attr("data-id"),proyectos_id=jQuery("#global_proyectos_id").val(),$.confirm({title:"Confirmar",content:"Desea eliminar este registro de costos del proyecto?",buttons:{Confirmar:function(){$.ajax({url:_site_url+"/proyectos/delete_costo",type:"POST",dataType:"json",data:{costos_id:costos_id,proyectos_id:proyectos_id}}).done(function(t){_alert(t.message,0),_helper_trigger("custom__reload_costos"),console.log("success")}).fail(function(){console.log("error")}).always(function(){console.log("complete")})},Cancelar:function(){}}}),t.preventDefault()})},init_detalles__delete_cotizaciones:function(){jQuery("body").on("click",".js-delete-cotizacion",function(t){id=jQuery(this).attr("data-id"),proyectos_id=jQuery("#global_proyectos_id").val(),$.confirm({title:"Confirmar",content:"Desea quitar la cotizaciÃ³n?",buttons:{Confirmar:function(){$.ajax({url:_site_url+"/proyectos/delete_cotizacion",type:"POST",dataType:"json",data:{cotizacion_id:id,proyectos_id:proyectos_id}}).done(function(t){_alert(t.message,0),_helper_trigger("custom__reload_cotizacion"),console.log("success")}).fail(function(){console.log("error")}).always(function(){console.log("complete")})},Cancelar:function(){}}}),t.preventDefault()})},init_detalles_change_status:function(){jQuery("body").on("click",".js-change-status",function(t){status=jQuery(this).attr("data-status"),proyectos_id=jQuery("#global_proyectos_id").val(),document.location.href=_site_url+"/proyectos/change_status/"+status+"/"+proyectos_id,t.preventDefault()})},init_detalles:function(){_this_=this,jQuery("body").on("click","#js-add-costo",function(t){$.ajax({url:_site_url+"/proyectos/form_costos",type:"post",dataType:"json",data:{proyectos_id:jQuery("#global_proyectos_id").val()}}).done(function(t){jQuery("#modal-js-add-costos").find(".modal-body").html(t.html),$(".switch-button").bootstrapToggle(),_this_.custom__init_numbers(),_this_.init_time(),_init_form(),jQuery("#modal-js-add-costos").modal()}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}),jQuery("body").on("click",".js-edit-costo",function(t){costos_id=jQuery(this).attr("data-value"),$.ajax({url:_site_url+"/proyectos/form_costos",type:"post",dataType:"json",data:{proyectos_id:jQuery("#global_proyectos_id").val(),costos_id:costos_id}}).done(function(t){jQuery("#modal-js-add-costos").find(".modal-body").html(t.html),$(".switch-button").bootstrapToggle(),_this_.custom__init_numbers(),_this_.init_time(),_init_form(),jQuery("#modal-js-add-costos").modal()}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}),jQuery("body").on("change","#costos_categorias_id",function(t){id=jQuery(this).val(),jQuery("option.option-costos-item").hide(),jQuery('.option-costos-item[data-parent="'+id+'"]').show(),jQuery("#costos_items_id").val("").trigger("change"),t.preventDefault()}),_this_.init__reload_costos(),_this_.init__reload_cotizaciones(),_this_.init_detalles__view_cotizacion(),_this_.init_detalles__form_add_cotizacion(),_this_.init_detalles__delete_costos(),_this_.init_detalles__delete_cotizaciones(),_this_.init_detalles_change_status()}};function success_message(t){$("#list-report-success").slideUp("fast"),$("#list-report-success").html(t),$("#list-report-success").slideDown("normal")}jQuery(function(){switch(main.init(),_controller){case"proyectos":switch(_action){case"detalles":main.init_table_links_gestor(),main.init_select2_form_agregar_link(),main.init_modal_agregar_link(),main.init_detalles(),main.init_finalizar_proyecto(),main.init_time();break;case"index":main.init_table_proyectos_gestor(),main.init_js_atender();break;case"operacion":main.init_time()}break;case"informe_cotizaciones":switch(_action){case"index":main.init_table__informe_cotizaciones(),main.table__informe_cotizaciones()}case"cotizacion":switch(_action){case"operacion":main.init_change_moneda_id()}break;case"bases":switch(_action){case"admin":main.init_table_links_bases();break;case"configurar":main.init_time()}}});